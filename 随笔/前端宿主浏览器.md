# 前端宿主浏览器

## 网页解析
- 页面标签解析为 dom 树形结构
- 按照深度优先解析原则
- 解析完毕不代表加载完毕

## 网页加载
- 资源加载的过程
- 在解析之后

## CSS 树
- 解析标签和样式直接的关系
- 去除不兼容的样式

## 渲染树
- DOM 树结合 CSS 树
- 浏览器根据渲染器绘制页面
- 每个节点都有自己的样式
- 不包含隐藏节点和不需要绘制的节点
- 包含 visibility 影响布局的都要绘制
- 渲染树上的每个节点都是个盒子

## 回流 reflow
- 一定会引起重绘
- 因为节点的尺寸、布局、display 的改变导致渲染树的重新构建
- DOM 节点增删、位置变化、尺寸改变、dsipaly 显示与否
- 页面渲染初始化
- 浏览器窗口尺寸变化
- 向浏览器请求样式信息

## 重绘 repaint
- 回流完成后浏览器根据渲染树重新绘制回流影响的部分节点这个重新绘制的过程
- 颜色改变等

## 浏览器渲染队列机制
- 把回流重绘操作放入队列批量处理
- 向浏览器请求样式信息会清空队列从而得到准确值

## 减少回流重绘
- 通过类名批量修改样式
- cssText 批量修改
- 文档碎片不占据 DOM
- 先 display none 再修改样式
- 先缓存 offset
- 动画元素使用绝对定位新建定位层脱离文档流

## 时间线
- 浏览器加载页面起到加载结束的过程按顺序发生的每件事的总流程
- 生成 document 对象 js 生效
- 解析文档 构建 dom 树
- link 开新线程，异步加载 css 外部文件
- dom 树和 css 树同时构建
- 没有设置异步 script 则阻碍文档解析，等待 js 加载执行完成后再解析
- 如果是异步 script 异步加载 js 不阻碍解析文档，不能使用 document.write
- 解析文档遇到 img 先解析节点，创建加载线程异步加载图片资源，不阻塞解析文档
- 文档解析完成 defer script 再开始执行
- 文档解析完成 DOMContentLoaded 事件
- 


