# 前端性能优化
## 让加载更快
1. 减少资源体积：压缩代码
2. 减少访问次数：合并代码，ssr 渲染，缓存
3. CDN（区域代理
## 让渲染更快
1. css 放 head，js 放 body 后
2. 尽早执行 js（DOMContentLoaded
3. 懒加载
4. dom 查询缓存
5. 合并 dom 操作
6. 节流防抖
## 缓存
1. 静态资源加哈希后缀
2. 文件不变则哈希不变则 url 不变
3. url 和文件不变则触发 304
## 防抖
> 频繁触发一次执行（降低频率
```javascript
const input1 = document.getElementById('input1')
function debounce(fn, delay = 500) {
    // timer 是闭包中的
    let timer = null

    return function () {
        if (timer) {
            clearTimeout(timer)
        }
        timer = setTimeout(() => {
            fn.apply(this, arguments)
            timer = null
        }, delay)
    }
}
input1.addEventListener('keyup', debounce(function (e) {
    console.log(e.target)
    console.log(input1.value)
}, 600))
```
## 节流
> 把触发频率限定死
```javascript
function throttle(fn, delay = 100) {
    let timer = null
    return function () {
        if (timer) {
            return
        }
        timer = setTimeout(() => {
            fn.apply(this, arguments)
            timer = null
        }, delay)
    }
}
div1.addEventListener('drag', throttle(function (e) {
    console.log(e.offsetX, e.offsetY)
}))
```